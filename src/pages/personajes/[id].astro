---
import Separador from '@components/shared/Separador.astro'
import MainLayout from '@layouts/MainLayout.astro'
import { getPersonajesDBZById } from '@services/personajesDBZ'
import { Icon } from 'astro-icon/components'
import { Image } from 'astro:assets'

export const prerender = false

const { id } = Astro.params

let personaje
if (id) {
  personaje = await getPersonajesDBZById({ id })
}

// export async function getStaticPaths() {
//   const personajes = await getPersonajesDBZ()

//   return personajes.map((personaje) => ({
//     params: {
//       id: personaje.id
//     }
//   }))
// }

interface AstroProps {
  id: string
  name: string
  race: keyof typeof raceColors
  image: string
}

const { name, race, image } = personaje as unknown as AstroProps

const raceColors = {
  Human: 'bg-gradient-to-r from-sky-400 to-cyan-300',
  Saiyan: 'bg-gradient-to-r from-yellow-100 via-yellow-300 to-yellow-500',
  Namekian: 'bg-gradient-to-r from-green-200 via-green-400 to-purple-700',
  Majin: 'bg-gradient-to-r from-pink-400 to-pink-600',
  'Frieza Race': 'bg-gradient-to-r from-purple-200 via-purple-400 to-purple-800',
  Android: 'bg-[radial-gradient(ellipse_at_right,_var(--tw-gradient-stops))] from-sky-400 to-indigo-900',
  'Jiren Race': 'bg-gradient-to-tr from-violet-500 to-orange-300',
  'God Angel': 'bg-teal-500',
  Evil: 'bg-black',
  Nucleico:
    'bg-[radial-gradient(ellipse_at_bottom,_var(--tw-gradient-stops))] from-amber-200 via-violet-600 to-sky-900',
  'Nucleico benigno':
    'bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-gray-300 via-fuchsia-600 to-orange-600',
  Unknown: 'bg-gradient-to-r from-teal-200 to-lime-200'
}

import ilustracion01 from '@assets/ilustraciones/01-min.webp'
import ilustracion02 from '@assets/ilustraciones/02-min.webp'
import ilustracion03 from '@assets/ilustraciones/03-min.webp'
---

<MainLayout title={`${id} Madebook - Clone de Facebook realizado con Astro.builds por Manuel Denis.`}>
  <article class='bg-white rounded-xl py-2 px-4 flex mx-auto max-w-xl flex-col gap-2 mt-4'>
    <header class='flex items-center mt-2 justify-between gap-2'>
      <a href='/' class='bg-zinc-200 rounded-full size-10 flex items-center justify-center'>
        <img
          src={image}
          alt='Foto de perfil del usuario Manuel Denis'
          class={`w-10 h-10 rounded-full object-cover object-top border-2 border-white dark:border-zinc-900 ${raceColors[race] || 'bg-gradient-to-b from-gray-900 to-gray-600 '} rounded-full`}
        />
      </a>
      <div class='relative rounded-full shadow-sm flex items-start flex-col flex-1'>
        <h5 class='text-sm'>
          <strong class='text-zinc-900' transition:name={`name-${id}`}>{name}</strong> est√° en <strong
            class='text-zinc-900'>Atlantis Ibiza.</strong
          >
        </h5>
        <p class='text-xs'>44 minutos ¬∑ Ibiza, Islas Baleares ¬∑ üåç</p>
      </div>
    </header>
    <main>
      <p>Si podemos desbloquear los secretos de nuestro pasado, tal vez podamos salvar nuestro futuro. ‚ù§Ô∏è‚Äçü©π</p>
      <ul class='flex gap-2 font-light'>
        <li>#nofilter</li>
        <li>#bucketlist</li>
        <li>#atlantisibiza</li>
        <li>#ibizalife</li>
        <li>#boattrip</li>
      </ul>
      <div class='grid grid-cols-2 gap-1'>
        <img
          src={image}
          alt={name}
          class={`w-full aspect-square object-cover object-top ${raceColors[race] || 'bg-gradient-to-b from-gray-900 to-gray-600 '} `}
          transition:name={`image-${id}`}
        />
        <Image src={ilustracion01} alt='Ilustracion' class='w-full aspect-square object-cover' />
        <Image src={ilustracion02} alt='Ilustracion' class='w-full aspect-square object-cover' />
        <Image src={ilustracion03} alt='Ilustracion' class='w-full aspect-square object-cover' />
      </div>
      <footer>
        <div class='flex justify-between items-center text-sm font-light gap-2'>
          <div class='flex'>
            <Icon name='megusta-circulo' class='size-4' />
            <Icon name='meencanta-circulo' class='size-4 -ml-1' />
          </div>
          <span class='flex-1'>Fernando Duran, Robert T San y 2 m√°s</span>
          <span>1 comentario</span>
        </div>
        <Separador />
      </footer>
    </main>
  </article>
</MainLayout>
